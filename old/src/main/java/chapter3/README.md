# 3장 템플릿

## 들어가며

- 확장에는 자유롭게 열려 있고 변경에는 굳게 닫혀 있다는 객체지향 설계의 핵심 원칙인 개방 폐쇄 원칙을 다시 한번 생각해보자
- 이 원칙에서 코드에서 어떤 부분은 변경을 통해 그 기능이 다양해지고 확장하려는 성질이 있고, 어떤 부분은 변하지 않으려는 성질이 있음을 말해준다
- 변화의 특성이 다른 부분을 구분해주고, 각각 다른 목적과 다른 이유에 의해 다른 시점에 독립적으로 변경될 수 있는 효율적인 구조를 만들어주는 것이 바로 이 개방 폐쇄 원칙이다
- <b>템플릿</b>이란 이렇게 바뀌는 성질이 다른 코드 중에서 변경이 거의 일어나지 않으며 일정한 패턴으로 유지되는 특성을 가진 부분을 자유롭게 변경되는 성질을 가진 부분으로부터 독립시켜서 효과적으로 활용할 수
  있도록 하는 방법이다
- 3장에서는 스프링에 적용된 템플릿 기법을 살펴보고, 이를 적용해 완성도 있는 DAO 코드를 만드는 방법을 알아보자

## 1. 다시보는 초난감 DAO (review package)

## 2. 변하는 것과 변하지 않는 것 (strategy_pattern package)

## 3. JDBC 전략 패턴의 최적화 (optimization package)

## 4. 컨텍스트와 DI (context_and_di package)

## 5. 템플릿과 콜백 (template_and_callback package)

## 6. 스프링의 JdbcTemplate (spring_jdbcTemplate package)

## 7. 정리
    1. JDBC와 같은 예외가 발생할 가능성이 있으며 공유 리소스의 반환이 필요한 코드는
      반드시 try/catch/finally 블록으로 관리해야 한다
    2. 일정한 작업 흐름이 반복되면서 그중 일부 기능만 바뀌는 코드가 존재한다면 전략 패턴을
      적용한다. 바뀌지 않는 부분은 컨텍스트로, 바뀌는 부분은 전략으로 만들고 인터페이스를
      통해 유연하게 전략을 변경할 수 있도록 구성한다
    3. 같은 애플리케이션 안에서 여러 가지 종류의 전략을 다이내믹하게 구성하고 사용해야 한다면
      컨텍스트를 이용하는 클라이언트 메소드에서 직접 전략을 정의하고 제공하게 만든다
    4. 컨텍스트가 하나 이상의 클라이언트 오브젝트에서 사용된다면 클래스를 분리해서 공유하도록
      만든다
    5. 컨텍스트는 별도의 빈으로 등록해서 DI 받거나 클라이언트 클래스에서 직접 생성해서 사용한다
      클래스 내부에서 컨텍스트를 사용할 때 컨텍스트가 의존하는 외부의 오브젝트가 있다면
      코드를 이용해서 직접 DI 해줄 수 있다
    6. 콜백의 코드에도 일정한 패턴이 반복된다면 콜백을 템플릿에 넣고 재활용하는 것이 편리하다
    7. 템플릿과 콜백의 타입이 다양하게 바뀔 수 있다면 제네릭스를 이용한다
    8. 스프링은 JDBC 코드 작성을 위해 JdbcTemplate을 기반으로 하는 다양한 템플릿과
      콜백을 제공한다
    9. 템플릿은 한 번에 하나 이상의 콜백을 사용할 수도 있고, 하나의 콜백을 여러 번 호출할 수도 있다
    10. 템플릿/콜백을 설계할 떄는 템플릿과 콜백 사이에 주고받는 정보에 관심을 둬야 한다