## 5. 스프링의 IoC (spring_ioc package)
- 스프링의 핵심을 담당하는 것은 빈 팩토리 또는 애플리케이션 컨텍스트라고 불리는 것이다
- 이 두가지는 우리가 만든 DaoFactory가 하는 일을 좀더 일반화한 것이라고 설명할 수 있다.


### 1. 오브젝트 팩토리를 이용한 스프링 IoC
- 빈 : 스프링에서 제어권을 가지고, 직접 만들고, 관계를 부여하는 객체를 빈이라고 부른다
- 자바빈 또는 엔터프라이즈 자바빈(EJB)에서 말하는 빈과 비슷한 객체 단위의 애플리케이션 컴포넌트를 말한다
- 동시에 스프링 빈은 컨테어너가 생성과 관계설정, 사용 등을 제어해주는 제어의 역전이 적용된 객체를 가르키는 말이다


- 스프링에서는 빈의 생성과 관계설정 같은 제어를 담당하는 IoC 객체를 빈 팩토리라고 부른다
- 보통 빈 팩토리보다는 이를 좀더 확장한 애플리케이션 컨텍스트를 주로 사용한다
- 애플리케이션 컨텍스트는 IoC 방식을 따라 만들어진 일종의 빈 팩토리라고 생각하면 된다


- 빈 팩토리 : 빈을 생성하고 관계를 설정하는 IoC의 기본 기능에 초점
- 애플리케이션 컨텍스트 : 애플리케이션 전반에 걸쳐 모든 구성요소의 제어 작업을 담당하는 IoC 엔진


#### DaoFactory를 사용하는 애플리케이션 컨텍스트
- @Configuration : 애플리케이션 컨텍스트가 사용할 설정정보라는 표시
- @Bean : 객체 생성을 담당하는 IoC용 메소드 라는 표시
  

- 이제 ApplicationContext 타입의 객체를 만들어보자
- @Configuration이 붙은 자바 코드를 설정정보로 사용하려면 AnnotationConfigApplicationContext를 이용하면 된다
- getBean(beanName, beanClass) : ApplicationContext가 관리하는 객체를 요청하는 메소드


### 2. 애플리케이션 컨텍스트의 동작방식
- 객체 팩토리 (DaoFactory) <-> 애플리케이션 컨텍스트
- 애플리케이션 컨텍스트 = IoC 컨테이너 = 빈 팩토리
- 애플리케이션 컨텍스트는 애플리케이션에서 IoC를 적용해서 관리할 모든 객체에 대한 생성과 관계설정을 담당한다
  

- 애플리케이션 컨텍스트에는 DaoFactory와 달리 직접 객체를 생성하고 관계를 맺는 코드는 없고, 그런 생성정보와 연관관계 정보를 별도의 설정정보를 통해 얻는다
- 때로는 외부의 객체 팩토리에 그 작업을 위임하고 그 결과를 가져다가 사용하기도 한다

  
- @Configuration이 붙은 DaoFactory는 이 애플리케이션 컨텍스트가 활용하는 IoC 설정정보다.
- 애플리케이션 컨텍스트는 DaoFactory 클래스를 설정정보로 등록해두고 @Bean이 붙은 메소드의 이름을 가져와 빈 목록을 만들어둔다
- 클라이언트가 getBean() 메소드를 호출하면 자신의 빈 목록에서 요청한 이름이 있는지 찾고, 있다면 빈을 생성하는 메소드를 호출해서 객체를 생성한후 클라이언트에 돌려준다


- 애플리케이션 컨텍스트를 사용할떄 얻을 수 있는 이점?
    1. 클라이언트는 구체적인 팩토리 클래스를 알 필요가 없다
    2. 애플리케이션 컨텍스트는 종합 IoC 서비스를 제공해준다
       - <b>단지 오브젝트의 생성과 다른 오브젝트와의 관계 설정만 하는 것은 아님</b>
       - 오브젝트가 만들어지는 방식, 시점과 전략을 다르게 가져갈 수 있음
       - 부가적으로 자동생성, 객체 후처리, 정보의 조합, 설정방식의 다변화, 인터셉팅 등 다양한 기능을 제공
    3. 애플리케이션 컨텍스트는 빈을 검색하는 다양한 방법을 제공한다


### 3. 스프링 IoC의 용어 정리
    1. 빈 : 빈, 빈 오브젝트는 스프링이 IoC 방식으로 관리하는 객체 라는 뜻이다
            주의할 점은 스프링을 사용하는 애플리케이션에서 만들어지는 모든 객체가 빈은 아니라는 사실이다
            그중에서 스프링이 직접 생성과 제어를 담당하는 객체만을 빈이라고 부른다
    2. 빈 팩토리 : 스프링의 IoC를 담당하는 핵심 컨테이너를 가르킨다
                  빈을 등록하고, 생성하고, 조회하고 돌려주고, 그 외에 빈을 관리하는 기능을 담당한다.
                  보통 이 빈 팩토리를 바로 사용하지 않고 이를 확장한 애플리케이션 컨텍스트를 이용한다
    3. 애플리케이션 컨텍스트 : 빈 팩토리를 확장한 IoC 컨테이너다. 빈 팩토리 + 스프링이 제공하는 각종 부가 서비스를 추가로 제공한다
    4. 설정정보/설정 메타정보 : 애플리케이션 컨텍스트가 iOc를 적용하기 위해 사용하는 메타정보를 말한다.
                            영어로 Configuration이라고 하는데 이는 구성정보 내지는 형상정보라는 의미다
                            애플리케이션의 형상정보, 전체 그림이 그려진 청사진이라고도 한다
    5. 컨테이너 또는 IoC 컨테이너 : IoC 방식으로 빈을 관리한다는 의미에서 애플리케이션 컨텍스트나 빈 팩토리를 컨테이너 또는 IoC 컨테이너라고도 한다
    6. 스프링 프레임워크 : IoC 컨테이너, 애플리케이션 컨텍스트를 포함해서 스프링이 제공하는 모든 기능을 통틀어 말할 때 주로 사용한다