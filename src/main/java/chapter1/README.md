# 1장 오브젝트와 의존관계

## 들어가며
- 스프링 = 자바 기반 => 객체 지향 프로그래밍
- J2EE에서 약화되었던 객체 지향 프로그래밍의 근본에 집중하자!
- 객체 지향 프로그래밍? => 객체에 관심을 많이 두게 됨
- 애플리케이션에서 객체가 생성되고, 다른 객체와 관계를 맺고, 사용되고, 소멸하기까지의 과정을 진지하게 고려해보자
- 더 나아가서 객체 설계, 객체 단위 등에 대해서 고려해보자

## 1. 초난감 DAO (firstdao package)
- 자바빈 형식으로 User 클래스를 만들었다 => 자바빈 => 기본 생성자, set, get 메소드
- UserDao => DB를 사용해 데이털르 조회하거나 조작하는 기능을 전담하도록 객체를 만들었다
- 잘 동작하긴함!!
- 잘 동작하는 코드를 왜 수정하고 개선해야 하는가?
- 그렇게 했을 때 장점은 무엇인가?
- 그런 장점들이 당장에, 혹은 미래에 주는 이점은 무엇인가?
- 객체지향 설계의 원칙과는 어떤 관계가 있는가?
- DAO를 개선하는 경우와 그대로 사용하는 경우, 스프링을 사용하는 개발에서 어떤 차이가 있는가?
- 스프링을 공부하는 것 => 이런 문제 제기와 의문에 대한 답을 찾아나가는 것!!

## 2. DAO의 분리 (SoC: Sepration of Concerns)
- 관심사의 분리 => 관심이 같은 것 끼리는 하나의 객체 안으로 또는 친한 객체로 모이게 한다
- 관심이 다른 것은 가능한 한 따로 떨어져서 서로 영향을 주지 않도록 분리한다
  
### 현재 관심 사항
1. DB와 연결을 위한 커넥션을 어떻게 가져올까 => 어떤 DB, 어떤 드라이버, 어떤 로그인 정보
* => 리팩토링 : 메소드로 중복된 코드를 뽑아내기 => 메소드 추출 기법
* => 리팩토링 : 슈퍼 클래스에 기본적인 로직의 흐름 (커넥션 가져오기, SQL 생성, 실행 반환)을 만들고,
그 기능의 일부를 추상 메소드나 오버라이딩이 가능한 protected 메소드 등으로 만든 뒤
서브 클래스에서 이런 메소드를 필요에 맞게 구현해서 사용하도록 하는 방법 => 템플릿 메소드 패턴 (스프링에서 애용 하는 패턴)
* 서브 클래스에서 구체적인 오브젝트 생성 방법을 결정하게 하는 방법 => 팩토리 메소드 패턴
* Connection 객체를 만들어 내는 것은 서브 클래스의 관심사항
* 서버의 DB 커넥션 풀에서 가져올 수도 있고, 드라이버를 직접 이용해 새로운 DB 커넥션을 만들수도 있음
* UserDao는 Connection 오브젝트가 만들어지는 방법과 내부 동작 방식에는 상관없이
자신이 필요한 기능을 Connection 인터페이스를 통해 사용하기만 할 뿐이다

2. DB에 보낼 SQL 문장을 담은 Statement를 만들고 실행하는 것 => 이후에!
   
3. 작업이 끝난 후 사용한 리소스인 Statement와 Connection 오브젝트를 닫아줘서 공유 리소스 반환 => 이후에!

#### 문제점
- 상속의 한계 => 자바에서는 다중 상속이 불가능하다
- 상하위 클래스의 관계는 생각보다 밀접하다 => 슈퍼클래스의 내부의 변경이 있을 때에는 모든 서브클래스를 수정해야할 수도 있음
- DAO가 추가됨에 따른 대응이 불가능 => getConnection()을 완전히 분리해야 할 것 같음

#### 디자인 패턴
- 소프트웨어 설계 시 특정 상황에서 자주 만나는 문제를 해결하기 위해 사용할 수 있는 재사용 가능한 솔루션
- 디자인 패턴은 주로 객체지향 설계에 관한 것이다
- 대부분 비슷하다 => 확장성 추구 방법이 대부분 두 가지 구조로 정리됨
- 템플릿 메소드 패턴 => 상속
- 팩토리 메소드 패턴 => 상속
